<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirsad Intelligence | Executive Dashboard</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: {
                            dark: '#0f172a',    
                            primary: '#3b82f6', 
                            success: '#10b981', 
                            warning: '#f59e0b', 
                            danger: '#ef4444',  
                            light: '#f8fafc'    
                        }
                    }
                }
            }
        }

        function dashboard() {
            return {
                sentimentFilter: 'all',
                posts: [
                    { 
                        id: 1, 
                        source: 'facebook', 
                        user: 'KHCF & KHCC', 
                        handle: '@KHCFKHCC', 
                        date: 'Dec 12', 
                        content: "ÿ•ÿ®ÿ±ÿßŸáŸäŸÖ ÿßŸÑÿ®ÿ∑ŸÑ ÿÆŸÑŸëÿµ ÿ¢ÿÆÿ± ÿ¨ÿ±ÿπÿ© ŸÉŸäŸÖÿßŸàŸä... ÿßŸÑÿ®ÿ∑ŸÑ ÿßŸÑÿµÿ∫Ÿäÿ± ÿπŸÑŸëŸÖŸÜÿß ÿ¥Ÿà ŸäÿπŸÜŸä ÿ¥ÿ¨ÿßÿπÿ©. ÿ£ŸÑŸÅ ÿßŸÑÿ≠ŸÖÿØŸÑŸÑŸá ÿπŸÑŸâ ÿßŸÑÿ≥ŸÑÿßŸÖÿ© üîîüíõ <span class='block mt-2 text-brand-primary'>#SuccessStory #Hope</span>", 
                        sentiment: 'positive',
                        engagement: 'High',
                        likes: '777',
                        shares: '209'
                    },
                    { 
                        id: 2, 
                        source: 'twitter', 
                        user: 'Muna AbuSulayman', 
                        handle: '@abusulayman', 
                        date: 'Oct 30', 
                        content: "ÿ≥ÿπÿØÿ™ ÿ®ÿØÿπŸàÿ™Ÿä ŸÑÿ≤Ÿäÿßÿ±ÿ© <span class='font-bold text-gray-900'>ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ≠ÿ≥ŸäŸÜ ŸÑŸÑÿ≥ÿ±ÿ∑ÿßŸÜ</span>. ŸÅÿÆŸàÿ±ÿ© ÿ®Ÿàÿ¨ŸàÿØ Ÿáÿ∞ÿß ÿßŸÑÿµÿ±ÿ≠ ÿßŸÑÿ∑ÿ®Ÿä ÿßŸÑŸÖÿ™ŸÖŸäÿ≤. üáØüá¥", 
                        sentiment: 'positive',
                        engagement: 'Viral',
                        likes: '1.2k',
                        shares: '20.7k Views'
                    },
                    { 
                        id: 3, 
                        source: 'facebook', 
                        user: 'Naser Q Qaqish', 
                        handle: 'Top Fan', 
                        date: 'Dec 09', 
                        content: "ÿ∂ÿ≠ŸÉ ÿπŸÑŸâ ÿßŸÑŸÜÿßÿ≥ ŸäÿπŸÜŸä ÿßŸÑŸä ÿπŸÖÿ±Ÿá ÿßŸÇŸÑ ŸÖŸÜ ÿ≥ÿ™ŸäŸÜ ÿ≥ŸÜŸá ŸÖÿß ÿßŸÑŸá ÿßŸÑÿ≠ŸÇ Ÿäÿ™ÿπÿßŸÑÿ¨ÿü ŸÇÿ±ÿßÿ± ÿ∫Ÿäÿ± ÿπÿßÿØŸÑ. <span class='font-bold text-gray-900'>#Insurance_Policy</span>", 
                        sentiment: 'negative',
                        engagement: 'Medium',
                        likes: '45',
                        shares: '12'
                    },
                    { 
                        id: 4, 
                        source: 'web', 
                        user: 'Al Mamlaka TV', 
                        handle: 'News Source', 
                        date: 'Dec 06', 
                        content: "ÿ•ÿ∑ŸÑÿßŸÇ ÿ®ÿ∑ÿßŸÇÿßÿ™ ÿßŸÑÿ™ÿ£ŸÖŸäŸÜ ÿßŸÑÿ≠ŸÉŸàŸÖŸä ŸÑŸÑÿπŸÑÿßÿ¨ ŸÅŸä ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ≠ÿ≥ŸäŸÜ ŸÑŸÑÿ≥ÿ±ÿ∑ÿßŸÜ.", 
                        sentiment: 'neutral',
                        engagement: 'Medium',
                        likes: '890',
                        shares: '1.2k'
                    },
                    { 
                        id: 5, 
                        source: 'twitter', 
                        user: 'AraBella', 
                        handle: '@AraBellaa_962', 
                        date: 'Jan 05', 
                        content: "ÿ®ÿ£ŸäÿØŸä ŸàÿπŸÇŸàŸÑ ÿ£ÿ±ÿØŸÜŸäÿ©ÿå ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ≠ÿ≥ŸäŸÜ Ÿäÿ¨ÿ±Ÿä ÿ£ŸàŸÑ ÿπŸÖŸÑŸäÿ© ŸÜŸàÿπŸäÿ© ŸÑÿ£Ÿàÿ±ÿßŸÖ ÿßŸÑÿØŸÖÿßÿ∫ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÑŸäÿ≤ÿ± ŸàÿßŸÑÿ±Ÿàÿ®Ÿàÿ™. üß†ü§ñ", 
                        sentiment: 'positive',
                        engagement: 'High',
                        likes: '2.1k',
                        shares: '540'
                    }
                ],
                get filteredPosts() { 
                    return this.sentimentFilter === 'all' 
                        ? this.posts 
                        : this.posts.filter(p => p.sentiment === this.sentimentFilter);
                },
                getSourceIcon(source) {
                    const icons = {
                        twitter: '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
                        facebook: '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
                        web: '<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>'
                    };
                    return icons[source] || icons.web;
                },
                getSourceClass(source) {
                    const classes = { twitter: 'bg-black', facebook: 'bg-blue-600', web: 'bg-gray-500' };
                    return classes[source] || 'bg-gray-400';
                }
            }
        }
    </script>
    <style>
        .feed-scroll::-webkit-scrollbar { width: 4px; }
        .feed-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-brand-light text-slate-800 font-sans antialiased" x-data="dashboard()">

    <div class="flex h-screen overflow-hidden">
        
        <aside class="w-64 bg-brand-dark flex flex-col shadow-2xl z-20 hidden md:flex">
            <div class="h-16 flex items-center px-6 bg-slate-900/50 border-b border-slate-800">
                <img src="https://freeimage.host/i/fYqRTRR" alt="Mirsad Intelligence Logo" class="h-10 w-auto">
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="#" class="flex items-center px-4 py-3 text-white bg-brand-primary/20 rounded-lg border-l-4 border-brand-primary">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 012 2h2a2 2 0 012-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                    Dashboard
                </a>
                <a href="#" class="flex items-center px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    Influencers
                </a>
                <a href="#" class="flex items-center px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-all">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"></path></svg>
                    Mentions
                </a>
            </nav>
        </aside>

        <main class="flex-1 overflow-y-auto relative bg-slate-50">
            <header class="bg-white border-b border-slate-200 h-16 flex items-center justify-between px-8 sticky top-0 z-10">
                <div>
                    <h2 class="text-lg font-bold text-slate-800">KHCC Brand Intelligence</h2>
                    <p class="text-xs text-slate-500">Data Source: Social & Web ‚Ä¢ Period: Last 90 Days</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="bg-brand-primary text-white text-xs font-bold px-4 py-2 rounded shadow hover:bg-blue-600 transition">Download PDF</button>
                    <div class="h-8 w-8 rounded-full bg-slate-200 border border-slate-300"></div>
                </div>
            </header>

            <div class="p-8 max-w-7xl mx-auto space-y-6">

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between">
                        <div class="flex justify-between items-center mb-2">
                            <p class="text-xs font-bold text-slate-400 uppercase">Brand Health Index</p>
                            <span class="bg-green-100 text-green-700 text-[10px] px-2 py-0.5 rounded-full font-bold">Excellent</span>
                        </div>
                        <div class="relative h-24 flex justify-center items-end">
                            <canvas id="bhiChart"></canvas>
                            <div class="absolute bottom-0 mb-[-5px] flex flex-col items-center">
                                <span class="text-3xl font-bold text-slate-800">0.8</span>
                            </div>
                        </div>
                        <p class="text-center text-[10px] text-slate-400 mt-2">Loved on the Internet!</p>
                    </div>

                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center">
                         <div>
                            <p class="text-xs font-bold text-slate-400 uppercase">Total Mentions</p>
                            <h3 class="text-3xl font-bold text-slate-800 mt-2">318</h3>
                        </div>
                        <p class="text-xs text-slate-400 mt-2">‚Üë 45 from last period</p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center">
                         <div>
                            <p class="text-xs font-bold text-slate-400 uppercase">Est. Reach</p>
                            <h3 class="text-3xl font-bold text-slate-800 mt-2">65.2K</h3>
                        </div>
                        <p class="text-xs text-slate-400 mt-2">Driven by Viral Video</p>
                    </div>
                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center">
                         <div>
                            <p class="text-xs font-bold text-slate-400 uppercase">Engagement Rate</p>
                            <h3 class="text-3xl font-bold text-slate-800 mt-2">4.8%</h3>
                        </div>
                        <p class="text-xs text-slate-400 mt-2">High for Healthcare Sector</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-slate-700">Mention Velocity</h3>
                            <div class="flex items-center space-x-2 text-xs">
                                <span class="flex items-center"><span class="w-2 h-2 rounded-full bg-blue-500 mr-1"></span> Owned</span>
                                <span class="flex items-center"><span class="w-2 h-2 rounded-full bg-purple-500 mr-1"></span> Earned</span>
                            </div>
                        </div>
                        <div class="h-64">
                            <canvas id="velocityChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-700 mb-4">Sentiment by Platform</h3>
                        <div class="h-64">
                            <canvas id="platformSentimentChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-700 mb-2">Demographics</h3>
                        <p class="text-xs text-slate-400 mb-4">Inferred from Usernames</p>
                        <div class="h-48 relative flex justify-center">
                            <canvas id="demoChart"></canvas>
                        </div>
                        <div class="mt-2 flex justify-center space-x-4">
                            <div class="flex items-center"><span class="w-3 h-3 bg-pink-500 rounded-full mr-1"></span><span class="text-xs font-bold text-slate-600">Female</span></div>
                            <div class="flex items-center"><span class="w-3 h-3 bg-blue-500 rounded-full mr-1"></span><span class="text-xs font-bold text-slate-600">Male</span></div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-700 mb-4">Social Mentions Sources</h3>
                        <div class="h-48">
                            <canvas id="sourceChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="font-bold text-slate-700 mb-4">Brand Pillar Impact</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="font-medium">Hope & Survival</span>
                                    <span class="font-bold">52%</span>
                                </div>
                                <div class="w-full bg-slate-100 rounded-full h-2">
                                    <div class="bg-brand-success h-2 rounded-full" style="width: 52%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="font-medium">Humanity & Compassion</span>
                                    <span class="font-bold">23%</span>
                                </div>
                                <div class="w-full bg-slate-100 rounded-full h-2">
                                    <div class="bg-blue-400 h-2 rounded-full" style="width: 23%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="font-medium">Medical Excellence</span>
                                    <span class="font-bold">15%</span>
                                </div>
                                <div class="w-full bg-slate-100 rounded-full h-2">
                                    <div class="bg-slate-600 h-2 rounded-full" style="width: 15%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="font-medium">National/Institutional</span>
                                    <span class="font-bold">10%</span>
                                </div>
                                <div class="w-full bg-slate-100 rounded-full h-2">
                                    <div class="bg-amber-400 h-2 rounded-full" style="width: 10%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                        <div class="p-5 border-b border-slate-100 bg-slate-50">
                            <h3 class="font-bold text-slate-700">Top Influencers</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b">
                                    <tr>
                                        <th class="px-4 py-3">Name</th>
                                        <th class="px-4 py-3">Impact</th>
                                        <th class="px-4 py-3">Role</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-slate-100">
                                    <tr class="hover:bg-slate-50">
                                        <td class="px-4 py-3 font-medium text-slate-800">Muna AbuSulayman</td>
                                        <td class="px-4 py-3 text-brand-primary font-bold">20.7K Views</td>
                                        <td class="px-4 py-3 text-xs"><span class="bg-purple-100 text-purple-700 px-2 py-0.5 rounded">Regional Influencer</span></td>
                                    </tr>
                                    <tr class="hover:bg-slate-50">
                                        <td class="px-4 py-3 font-medium text-slate-800">AraBella News</td>
                                        <td class="px-4 py-3 text-brand-primary font-bold">2.1K Views</td>
                                        <td class="px-4 py-3 text-xs"><span class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded">Media</span></td>
                                    </tr>
                                    <tr class="hover:bg-slate-50">
                                        <td class="px-4 py-3 font-medium text-slate-800">Razan Ayasra</td>
                                        <td class="px-4 py-3 text-green-600 font-bold">15 Comments</td>
                                        <td class="px-4 py-3 text-xs"><span class="bg-green-100 text-green-700 px-2 py-0.5 rounded">Super Fan</span></td>
                                    </tr>
                                    <tr class="hover:bg-slate-50">
                                        <td class="px-4 py-3 font-medium text-slate-800">Sereen Al-Tbakhi</td>
                                        <td class="px-4 py-3 text-green-600 font-bold">Patient Mom</td>
                                        <td class="px-4 py-3 text-xs"><span class="bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded">Community</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col h-[400px]">
                        <div class="p-5 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                            <h3 class="font-bold text-slate-700">Mentions Stream</h3>
                            <div class="flex space-x-2">
                                <button @click="sentimentFilter = 'all'" :class="sentimentFilter === 'all' ? 'bg-brand-primary text-white shadow' : 'bg-white text-slate-600 border'" class="px-3 py-1 text-xs rounded transition">All</button>
                                <button @click="sentimentFilter = 'negative'" :class="sentimentFilter === 'negative' ? 'bg-brand-danger text-white shadow' : 'bg-white text-slate-600 border'" class="px-3 py-1 text-xs rounded transition">Risks</button>
                            </div>
                        </div>
                        <div class="flex-1 overflow-y-auto feed-scroll p-4 space-y-3">
                            <template x-for="post in filteredPosts" :key="post.id">
                                <div class="bg-white p-4 rounded-lg border border-slate-100 shadow-sm hover:shadow-md transition-all">
                                    <div class="flex justify-between items-start">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 rounded-full flex items-center justify-center shadow-sm" :class="getSourceClass(post.source)" x-html="getSourceIcon(post.source)"></div>
                                            <div>
                                                <div class="flex items-center space-x-2">
                                                    <span class="text-sm font-bold text-slate-800" x-text="post.user"></span>
                                                    <span class="text-xs text-slate-400" x-text="post.handle"></span>
                                                </div>
                                                <div class="text-[10px] text-slate-400" x-text="post.date"></div>
                                            </div>
                                        </div>
                                        <span class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide border" 
                                            :class="{
                                                'bg-green-50 text-green-600 border-green-100': post.sentiment === 'positive',
                                                'bg-red-50 text-red-600 border-red-100': post.sentiment === 'negative',
                                                'bg-slate-50 text-slate-600 border-slate-200': post.sentiment === 'neutral'
                                            }" 
                                            x-text="post.sentiment">
                                        </span>
                                    </div>
                                    <p class="mt-2 text-sm text-slate-600" x-html="post.content"></p>
                                    <div class="mt-3 flex items-center space-x-4 text-xs text-slate-400 border-t border-slate-50 pt-2">
                                        <span x-text="post.likes + ' Likes'"></span>
                                        <span x-text="post.shares + ' Shares'"></span>
                                        <span class="ml-auto text-slate-300" x-text="'Eng: ' + post.engagement"></span>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        Chart.register(ChartDataLabels);
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748b';

        // 1. BRAND HEALTH INDEX (GAUGE CHART)
        const ctxBHI = document.getElementById('bhiChart').getContext('2d');
        
        // Custom plugin to draw the needle
        const gaugeNeedle = {
            id: 'gaugeNeedle',
            afterDatasetDraw(chart, args, options) {
                const { ctx, config, data, chartArea: { top, bottom, left, right, width, height } } = chart;
                ctx.save();
                
                // Needle Value (0.8 mapped to angle)
                const value = 0.8;
                const angle = Math.PI + (Math.PI * value); 

                const cx = width / 2;
                const cy = height - 10; // Adjust based on chart cutout

                // Draw Needle
                ctx.translate(cx, cy);
                ctx.rotate(angle);
                ctx.beginPath();
                ctx.moveTo(0, -2);
                ctx.lineTo(height - 20, 0); // Length
                ctx.lineTo(0, 2);
                ctx.fillStyle = '#3b82f6'; // Brand Blue Needle
                ctx.fill();
                
                // Draw Pivot Circle
                ctx.rotate(-angle);
                ctx.beginPath();
                ctx.arc(0, 0, 5, 0, 10);
                ctx.fillStyle = '#3b82f6';
                ctx.fill();
                ctx.restore();
            }
        };

        new Chart(ctxBHI, {
            type: 'doughnut',
            data: {
                labels: ['Bad', 'Average', 'Good', 'Excellent'],
                datasets: [{
                    data: [0.2, 0.2, 0.2, 0.4],
                    backgroundColor: ['#ef4444', '#f59e0b', '#3b82f6', '#10b981'],
                    borderWidth: 0,
                    needleValue: 0.8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                rotation: -90,
                circumference: 180,
                cutout: '85%',
                plugins: {
                    legend: { display: false },
                    tooltip: { enabled: false },
                    datalabels: { display: false } // Hide labels on the gauge ring itself
                }
            },
            plugins: [gaugeNeedle]
        });

        // 2. VELOCITY CHART
        const ctxVelocity = document.getElementById('velocityChart').getContext('2d');
        const gradBlue = ctxVelocity.createLinearGradient(0, 0, 0, 300);
        gradBlue.addColorStop(0, 'rgba(59, 130, 246, 0.2)'); gradBlue.addColorStop(1, 'rgba(59, 130, 246, 0)');
        const gradPurple = ctxVelocity.createLinearGradient(0, 0, 0, 300);
        gradPurple.addColorStop(0, 'rgba(168, 85, 247, 0.2)'); gradPurple.addColorStop(1, 'rgba(168, 85, 247, 0)');

        new Chart(ctxVelocity, {
            type: 'line',
            data: {
                labels: ['Dec 06', 'Dec 07', 'Dec 08', 'Dec 09', 'Dec 10', 'Dec 11', 'Dec 12'],
                datasets: [
                    { label: 'Owned', data: [120, 150, 450, 200, 300, 1800, 1600], borderColor: '#3b82f6', backgroundColor: gradBlue, fill: true, tension: 0.4, borderWidth: 2 },
                    { label: 'Earned', data: [200, 250, 300, 280, 320, 500, 450], borderColor: '#a855f7', backgroundColor: gradPurple, fill: true, tension: 0.4, borderWidth: 2 }
                ]
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { 
                    legend: { display: false },
                    datalabels: { display: false } // No labels on line chart to avoid clutter
                }, 
                scales: { x: { grid: { display: false } }, y: { grid: { borderDash: [4, 4] }, beginAtZero: true } } 
            }
        });

        // 3. SENTIMENT BY PLATFORM (Labels Enabled)
        new Chart(document.getElementById('platformSentimentChart'), {
            type: 'bar',
            data: {
                labels: ['Facebook', 'Twitter', 'Web/News'],
                datasets: [
                    { label: 'Positive', data: [195, 30, 5], backgroundColor: '#10b981', stack: 'Stack 0' },
                    { label: 'Neutral', data: [10, 15, 10], backgroundColor: '#cbd5e1', stack: 'Stack 0' },
                    { label: 'Negative', data: [25, 5, 0], backgroundColor: '#ef4444', stack: 'Stack 0' }
                ]
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                scales: { x: { grid: { display: false } }, y: { display: false } }, 
                plugins: { 
                    legend: { position: 'bottom', labels: { boxWidth: 10 } },
                    datalabels: {
                        color: 'white',
                        font: { weight: 'bold', size: 10 },
                        formatter: (val) => val > 5 ? val : '' // Only show label if value > 5
                    }
                } 
            }
        });

        // 4. DEMOGRAPHICS (Clean Labels)
        new Chart(document.getElementById('demoChart'), {
            type: 'doughnut',
            data: { 
                labels: ['Female', 'Male'], 
                datasets: [{ 
                    data: [68, 32], 
                    backgroundColor: ['#ec4899', '#3b82f6'], 
                    borderWidth: 0 
                }] 
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                cutout: '65%', 
                plugins: { 
                    legend: { display: false },
                    datalabels: {
                        color: 'white',
                        font: { weight: 'bold' },
                        formatter: (val, ctx) => {
                            return ctx.chart.data.labels[ctx.dataIndex] + '\n' + val + '%';
                        }
                    }
                } 
            }
        });

        // 5. SOCIAL MENTIONS SOURCES (Pie Chart with Percentages)
        new Chart(document.getElementById('sourceChart'), {
            type: 'pie',
            data: {
                labels: ['Facebook', 'Twitter/X', 'Instagram', 'Web'],
                datasets: [{ 
                    data: [65, 25, 8, 2], 
                    backgroundColor: ['#1877F2', '#000000', '#E4405F', '#64748b'], 
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                plugins: { 
                    legend: { position: 'right', labels: { boxWidth: 10, font: { size: 10 } } },
                    datalabels: {
                        color: '#fff',
                        font: { weight: 'bold' },
                        formatter: (val) => val + '%'
                    }
                } 
            }
        });
    </script>
</body>
</html>
