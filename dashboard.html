<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirsad Intelligence | KHCC Social Listening</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        // 1. Define Tailwind Config
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: {
                            dark: '#1f2937',
                            blue: '#3b82f6',
                            green: '#10b981',
                            red: '#ef4444',
                            light: '#f3f4f6'
                        }
                    }
                }
            }
        }

        // 2. Define Alpine Data Component with KHCC DATA
        function dashboard() {
            return {
                sentimentFilter: 'all',
                sources: {
                    twitter: true,
                    facebook: true,
                    instagram: true,
                    web: true
                },
                posts: [
                    { 
                        id: 1, 
                        source: 'facebook', 
                        user: 'KHCF & KHCC', 
                        handle: '@KHCFKHCC', 
                        date: 'Dec 12', 
                        content: "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ø¨Ø·Ù„ Ø®Ù„Ù‘Øµ Ø¢Ø®Ø± Ø¬Ø±Ø¹Ø© ÙƒÙŠÙ…Ø§ÙˆÙŠ... Ø§Ù„Ø¨Ø·Ù„ Ø§Ù„ØµØºÙŠØ± Ø¹Ù„Ù‘Ù…Ù†Ø§ Ø´Ùˆ ÙŠØ¹Ù†ÙŠ Ø´Ø¬Ø§Ø¹Ø©. Ø£Ù„Ù Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù„Ø§Ù…Ø© ğŸ””ğŸ’› <span class='block mt-2 text-brand-blue'>#SuccessStory #Hope</span>", 
                        sentiment: 'positive',
                        likes: '777',
                        shares: '209'
                    },
                    { 
                        id: 2, 
                        source: 'twitter', 
                        user: 'Muna AbuSulayman', 
                        handle: '@abusulayman', 
                        date: 'Oct 30', 
                        content: "Ø³Ø¹Ø¯Øª Ø¨Ø¯Ø¹ÙˆØªÙŠ Ù„Ø²ÙŠØ§Ø±Ø© <span class='font-bold text-gray-900'>Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø³ÙŠÙ† Ù„Ù„Ø³Ø±Ø·Ø§Ù†</span>. ÙØ®ÙˆØ±Ø© Ø¨ÙˆØ¬ÙˆØ¯ Ù‡Ø°Ø§ Ø§Ù„ØµØ±Ø­ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ù…ØªÙ…ÙŠØ²ØŒ Ù„Ù…Ø§ ÙŠÙ‚Ø¯Ù…Ù‡ Ù…Ù† Ø¹Ù„Ø§Ø¬ Ø´Ø§Ù…Ù„ ÙˆÙÙ‚ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©. ğŸ‡¯ğŸ‡´", 
                        sentiment: 'positive',
                        likes: '1.2k',
                        shares: '20.7k Views'
                    },
                    { 
                        id: 3, 
                        source: 'facebook', 
                        user: 'Naser Q Qaqish', 
                        handle: 'Top Fan', 
                        date: 'Dec 09', 
                        content: "Ø¶Ø­Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø§Ø³ ÙŠØ¹Ù†ÙŠ Ø§Ù„ÙŠ Ø¹Ù…Ø±Ù‡ Ø§Ù‚Ù„ Ù…Ù† Ø³ØªÙŠÙ† Ø³Ù†Ù‡ Ù…Ø§ Ø§Ù„Ù‡ Ø§Ù„Ø­Ù‚ ÙŠØªØ¹Ø§Ù„Ø¬ØŸ Ù‚Ø±Ø§Ø± ØºÙŠØ± Ø¹Ø§Ø¯Ù„ Ø¨Ø­Ù‚ Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù…Ø±ÙŠØ© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©. <span class='font-bold text-gray-900'>#Insurance_Policy</span>", 
                        sentiment: 'negative',
                        likes: '45',
                        shares: '12'
                    },
                    { 
                        id: 4, 
                        source: 'facebook', 
                        user: 'Sereen Al-Tbakhi', 
                        handle: 'Patient Family', 
                        date: 'Dec 12', 
                        content: "Ø§Ù„Ù„Ù‡ ÙŠØ³Ù„Ù…ÙƒÙ… Ø¬Ù…ÙŠØ¹Ø§ Ùˆ ÙŠØ¨Ø¹Ø¯ Ø¹Ù†ÙƒÙ… ÙƒÙ„ Ø´Ø±. Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ„ Ø§Ù„ÙƒØ§Ø¯Ø± Ø§Ù„Ø·Ø¨ÙŠ ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ²ØŒ Ø£Ù†ØªÙ… Ù…Ù„Ø§Ø¦ÙƒØ© Ø§Ù„Ø±Ø­Ù…Ø©. â¤ï¸", 
                        sentiment: 'positive',
                        likes: '156',
                        shares: '0'
                    },
                    { 
                        id: 5, 
                        source: 'twitter', 
                        user: 'AraBella', 
                        handle: '@AraBellaa_962', 
                        date: 'Jan 05', 
                        content: "Ø¨Ø£ÙŠØ¯ÙŠ ÙˆØ¹Ù‚ÙˆÙ„ Ø£Ø±Ø¯Ù†ÙŠØ©ØŒ Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø³ÙŠÙ† ÙŠØ¬Ø±ÙŠ Ø£ÙˆÙ„ Ø¹Ù…Ù„ÙŠØ© Ù†ÙˆØ¹ÙŠØ© Ù„Ø£ÙˆØ±Ø§Ù… Ø§Ù„Ø¯Ù…Ø§Øº Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù„ÙŠØ²Ø± ÙˆØ§Ù„Ø±ÙˆØ¨ÙˆØª. Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ù†ÙˆØ¹Ù‡Ø§ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©! ğŸ§ ğŸ¤–", 
                        sentiment: 'positive',
                        likes: '2.1k',
                        shares: '540'
                    },
                    { 
                        id: 6, 
                        source: 'web', 
                        user: 'Al Mamlaka TV', 
                        handle: 'News', 
                        date: 'Dec 06', 
                        content: "Ø¥Ø·Ù„Ø§Ù‚ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ Ù„Ù„Ø¹Ù„Ø§Ø¬ ÙÙŠ Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø³ÙŠÙ† Ù„Ù„Ø³Ø±Ø·Ø§Ù†. ØªØ´Ù…Ù„ Ø§Ù„ÙØ¦Ø§Øª Ø¯ÙˆÙ† 19 Ø¹Ø§Ù…Ø§Ù‹ ÙˆÙÙˆÙ‚ 60 Ø¹Ø§Ù…Ø§Ù‹. <a href='#' class='text-blue-500 underline'>Read more</a>", 
                        sentiment: 'neutral',
                        likes: '890',
                        shares: '1.2k'
                    },
                    { 
                        id: 7, 
                        source: 'facebook', 
                        user: 'Razan Ayasra', 
                        handle: 'Community', 
                        date: 'Dec 12', 
                        content: "The real super hero ğŸ’ª Ø§Ù„Ù„Ù‡ ÙŠØªÙ…Ù… Ø´ÙØ§Ø¤Ù‡ Ø¹Ø®ÙŠØ± Ùˆ Ø³Ù„Ø§Ù…Ù‡ ÙŠØ§ Ø±Ø¨.", 
                        sentiment: 'positive',
                        likes: '34',
                        shares: '2'
                    },
                    { 
                        id: 8, 
                        source: 'facebook', 
                        user: 'Lamis Dia', 
                        handle: 'User', 
                        date: 'Dec 09', 
                        content: "Ù„Ù…Ø§Ø°Ø§ ÙŠØ­Ø±Ù… Ø§Ù„Ù…Ø¤Ù…Ù† ØªØ£Ù…ÙŠÙ† Ø®Ø§Øµ Ù…Ù† Ø§Ù„Ø¹Ù„Ø§Ø¬ ÙÙŠ Ù…Ø±ÙƒØ² Ø§Ù„Ø­Ø³ÙŠÙ† Ù„Ù„Ø³Ø±Ø·Ø§Ù†ØŸ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªØ£Ù…ÙŠÙ† ØªÙ„ØºÙŠ Ø§Ù„Ø¨ÙˆÙ„ÙŠØµØ© Ø¹Ù†Ø¯ Ø¹Ù…Ø± 60. Ù†Ø­Ù† Ø¹Ø§Ù„Ù‚ÙˆÙ† ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ!", 
                        sentiment: 'negative',
                        likes: '88',
                        shares: '15'
                    },
                    { 
                        id: 9, 
                        source: 'instagram', 
                        user: 'KHCF Official', 
                        handle: '@khcfkhcc', 
                        date: 'Dec 11', 
                        content: "Ø¥ÙŠÙ„ÙŠÙ† Ù…Ù† ØºØ²Ø© ÙƒØ§Ù† Ø¹Ù†Ø¯Ù‡Ø§ Ø­Ù„Ù… Ø¨Ø³ÙŠØ·â€¦ Ø¨ÙŠØª Ø¨Ø§Ø±Ø¨ÙŠ. Ø§Ù„ÙŠÙˆÙ…ØŒ Ù‚Ø¯Ø±Øª ØªØ¹ÙŠØ´ Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„ØªÙŠ ØªÙ…Ù†Ù‘ØªÙ‡Ø§. âœ¨ğŸ ", 
                        sentiment: 'positive',
                        likes: '2.4k',
                        shares: '56'
                    },
                    { 
                        id: 10, 
                        source: 'twitter', 
                        user: 'Ahmed Al-Saadi', 
                        handle: '@mdlsdy...', 
                        date: 'Feb 28', 
                        content: "Ø§Ø³ØªØºÙŠØ« Ø¨Ø§Ù„Ù„Ù‡... Ø²ÙˆØ¬ÙŠ Ù…Ø±ÙŠØ¶ Ø§Ù„Ù‚Ù„Ø¨ Ø¨Ù†Ø³Ø¨Ø© Ø¹Ø¬Ø² Ù¨Ù Ùª. Ø¨Ø­Ø§Ø¬Ø© Ù„Ù†Ù‚Ù„ Ù„Ù„Ù…Ø³ØªØ´ÙÙ‰ ÙÙˆØ±Ø§Ù‹. Ø£Ø±Ø¬Ùˆ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©.", 
                        sentiment: 'negative',
                        likes: '12',
                        shares: '8'
                    }
                ],
                get filteredPosts() { 
                    return this.posts.filter(p => {
                        // Filter by Sentiment
                        const sentimentMatch = this.sentimentFilter === 'all' || p.sentiment === this.sentimentFilter;
                        // Filter by Source (Checkbox logic)
                        const sourceMatch = this.sources[p.source];
                        
                        return sentimentMatch && sourceMatch;
                    });
                },
                getSourceIcon(source) {
                    const icons = {
                        twitter: '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
                        facebook: '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
                        instagram: '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>',
                        web: '<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>'
                    };
                    return icons[source] || icons.web;
                },
                getSourceClass(source) {
                    const classes = {
                        twitter: 'bg-black',
                        facebook: 'bg-blue-600',
                        instagram: 'bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500',
                        web: 'bg-gray-500'
                    };
                    return classes[source] || 'bg-gray-400';
                }
            }
        }
    </script>
    <style>
        .feed-scroll::-webkit-scrollbar { width: 6px; }
        .feed-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .feed-scroll::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-brand-light text-gray-800 font-sans antialiased" x-data="dashboard()">

    <div class="flex h-screen overflow-hidden">
        
        <aside class="w-64 bg-brand-dark flex flex-col shadow-xl z-20 hidden md:flex">
            <div class="h-16 flex items-center px-6 bg-gray-900 bg-opacity-50">
                <div class="text-white font-bold text-xl tracking-tight">
                    Mirsad <span class="text-white font-light">Intelligence</span>
                </div>
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="#" class="flex items-center px-4 py-3 text-white bg-gray-700 bg-opacity-50 rounded-lg border-l-4 border-brand-blue">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
                    Project: KHCC
                </a>
                <a href="#" class="flex items-center px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-all">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg>
                    Listening Stream
                </a>
                <a href="#" class="flex items-center px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-all">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 012 2h2a2 2 0 012-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                    Analytics
                </a>
            </nav>
            <div class="p-4 bg-gray-900 bg-opacity-30">
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-brand-blue flex items-center justify-center text-white font-bold text-xs">MK</div>
                    <div class="ml-3">
                        <p class="text-sm text-white">Mirsad Admin</p>
                        <p class="text-xs text-gray-400">View Profile</p>
                    </div>
                </div>
            </div>
        </aside>

        <main class="flex-1 overflow-y-auto relative">
            <header class="bg-white shadow-sm h-16 flex items-center justify-between px-8 sticky top-0 z-10">
                <h2 class="text-xl font-semibold text-gray-700">King Hussein Cancer Center Analysis</h2>
                <div class="flex items-center space-x-6">
                    <select class="text-sm border-gray-300 rounded-md text-gray-600 bg-gray-50 px-3 py-1 border shadow-sm">
                        <option>Last 30 Days</option>
                        <option>Last Quarter</option>
                        <option>Year to Date</option>
                    </select>
                    <div class="relative cursor-pointer hover:text-brand-blue transition">
                        <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>
                        <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-brand-red ring-2 ring-white"></span>
                    </div>
                </div>
            </header>

            <div class="p-8 space-y-8">

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider">Net Trust Score</h3>
                            <span class="px-2 py-1 bg-green-100 text-brand-green text-xs rounded-full font-bold">+5.1%</span>
                        </div>
                        <div class="relative h-48 w-full flex justify-center">
                            <canvas id="healthChart"></canvas>
                            <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none mt-4">
                                <span class="text-4xl font-bold text-gray-800">8.3</span>
                                <span class="text-xs text-gray-400">Excellent</span>
                            </div>
                        </div>
                        <p class="text-center text-xs text-gray-400 mt-2">Based on 318 analyzed mentions</p>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                         <div class="flex justify-between items-start mb-4">
                            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider">Sentiment by Source</h3>
                            <div class="flex gap-2">
                                <span class="w-3 h-3 rounded-full bg-brand-green"></span>
                                <span class="w-3 h-3 rounded-full bg-brand-red"></span>
                            </div>
                        </div>
                        <div class="h-48">
                            <canvas id="sentimentChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider">Brand Pillar Clusters</h3>
                            <button class="text-brand-blue text-xs hover:underline">View Details</button>
                        </div>
                        <div class="h-48 relative">
                             <canvas id="topicChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-gray-400 mt-1">Size = Volume | Color = Category</p>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-lg font-bold text-gray-800">Mention Volume (Owned vs Earned)</h3>
                            <p class="text-xs text-gray-400">Impact of Viral "Ibrahim" Campaign vs News Coverage</p>
                        </div>
                        <button class="text-gray-400 hover:text-brand-blue">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>
                        </button>
                    </div>
                    <div class="h-64 w-full">
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]">
                    <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col overflow-hidden">
                        <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                            <h3 class="text-lg font-bold text-gray-800">Live Mentions Stream</h3>
                            <div class="flex space-x-2">
                                <button @click="sentimentFilter = 'all'" :class="sentimentFilter === 'all' ? 'bg-brand-blue text-white' : 'bg-white text-gray-600 border'" class="px-3 py-1 text-xs rounded-md transition">All</button>
                                <button @click="sentimentFilter = 'negative'" :class="sentimentFilter === 'negative' ? 'bg-brand-red text-white' : 'bg-white text-gray-600 border'" class="px-3 py-1 text-xs rounded-md transition">Risks</button>
                            </div>
                        </div>
                        <div class="flex-1 overflow-y-auto feed-scroll p-5 bg-gray-50/50 space-y-4">
                            <template x-for="post in filteredPosts" :key="post.id">
                                <div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-all">
                                    <div class="flex justify-between items-start">
                                        <div class="flex items-center space-x-3">
                                            <div class="w-8 h-8 rounded-full flex items-center justify-center shadow-sm" :class="getSourceClass(post.source)" x-html="getSourceIcon(post.source)">
                                            </div>
                                            <div>
                                                <div class="flex items-center space-x-2">
                                                    <span class="text-sm font-bold text-gray-800" x-text="post.user"></span>
                                                    <span class="text-xs text-gray-400" x-text="post.handle"></span>
                                                </div>
                                                <div class="text-[10px] text-gray-400" x-text="post.date"></div>
                                            </div>
                                        </div>
                                        <span class="px-2 py-1 rounded text-xs font-bold border" 
                                            :class="{
                                                'bg-green-50 text-green-600 border-green-100': post.sentiment === 'positive',
                                                'bg-red-50 text-red-600 border-red-100': post.sentiment === 'negative',
                                                'bg-gray-50 text-gray-600 border-gray-100': post.sentiment === 'neutral'
                                            }" 
                                            x-text="post.sentiment.toUpperCase()">
                                        </span>
                                    </div>
                                    <p class="mt-3 text-sm text-gray-600 leading-relaxed" x-html="post.content"></p>
                                    
                                    <div class="mt-3 flex items-center space-x-4 text-xs text-gray-400 border-t border-gray-50 pt-2">
                                        <div class="flex items-center">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z"/></svg>
                                            <span x-text="post.likes"></span>
                                        </div>
                                        <div class="flex items-center">
                                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
                                            <span x-text="post.shares"></span>
                                        </div>
                                    </div>
                                </div>
                            </template>
                            <div x-show="filteredPosts.length === 0" class="text-center py-10 text-gray-400">
                                No mentions found matching your filters.
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-5 flex flex-col">
                        <h4 class="font-bold text-gray-800 mb-4">Source Filters</h4>
                        <div class="space-y-3">
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" x-model="sources.twitter" class="form-checkbox h-4 w-4 text-brand-blue rounded border-gray-300 focus:ring-brand-blue">
                                <span class="text-sm text-gray-600 group-hover:text-brand-blue">Twitter / X</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" x-model="sources.facebook" class="form-checkbox h-4 w-4 text-brand-blue rounded border-gray-300 focus:ring-brand-blue">
                                <span class="text-sm text-gray-600 group-hover:text-brand-blue">Facebook</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" x-model="sources.instagram" class="form-checkbox h-4 w-4 text-brand-blue rounded border-gray-300 focus:ring-brand-blue">
                                <span class="text-sm text-gray-600 group-hover:text-brand-blue">Instagram</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer group">
                                <input type="checkbox" x-model="sources.web" class="form-checkbox h-4 w-4 text-brand-blue rounded border-gray-300 focus:ring-brand-blue">
                                <span class="text-sm text-gray-600 group-hover:text-brand-blue">News / Web</span>
                            </label>
                        </div>
                        <div class="mt-auto bg-brand-blue rounded-lg p-4 text-white text-center">
                            <p class="text-sm font-bold mb-1">Export Report</p>
                            <button class="w-full bg-white text-brand-blue text-xs font-bold py-2 rounded mt-2 hover:bg-gray-50 transition">Download PDF</button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        // --- CHARTS ---
        Chart.defaults.font.family = "'Inter', sans-serif";
        
        // 1. Health (Based on 83% Positive Sentiment)
        new Chart(document.getElementById('healthChart'), {
            type: 'doughnut',
            data: { datasets: [{ data: [83, 17], backgroundColor: ['#10b981', '#f3f4f6'], borderWidth: 0, cutout: '85%', circumference: 260, rotation: 230 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { enabled: false } } }
        });

        // 2. Sentiment by Platform (Based on analysis)
        new Chart(document.getElementById('sentimentChart'), {
            type: 'bar',
            plugins: [ChartDataLabels],
            data: { 
                labels: ['Facebook', 'Twitter/X', 'Web/News'], 
                datasets: [
                    { 
                        label: 'Positive', 
                        data: [195, 30, 5], // Facebook heavy due to Ibrahim
                        backgroundColor: '#10b981', 
                        borderRadius: 4,
                        categoryPercentage: 0.7,
                        barPercentage: 0.8
                    },
                    { 
                        label: 'Neutral', 
                        data: [10, 15, 10], 
                        backgroundColor: '#9ca3af', 
                        borderRadius: 4,
                        categoryPercentage: 0.7,
                        barPercentage: 0.8
                    },
                    { 
                        label: 'Negative', 
                        data: [25, 5, 0], // Facebook heavy due to Policy complaints
                        backgroundColor: '#ef4444', 
                        borderRadius: 4,
                        categoryPercentage: 0.7,
                        barPercentage: 0.8
                    }
                ] 
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                scales: { 
                    x: { grid: { display: false }, ticks: { font: { size: 10 } } }, 
                    y: { display: false } 
                }, 
                plugins: { 
                    legend: { display: true, position: 'bottom', labels: { boxWidth: 10, font: { size: 10 } } },
                    datalabels: { color: 'white', font: { weight: 'bold', size: 9 }, anchor: 'center', align: 'center', formatter: (val) => val > 5 ? val : '' }
                } 
            }
        });

        // 3. Topics (Mapped to KHCC Brand Pillars)
        new Chart(document.getElementById('topicChart'), {
            type: 'bubble',
            plugins: [ChartDataLabels],
            data: { 
                datasets: [
                    { 
                        label: 'Hope & Survival', 
                        data: [{x: 20, y: 30, r: 35, category: 'Emotional', volume: '1.2K'}], 
                        backgroundColor: '#10b981', // Brand Green
                        borderColor: '#fff'
                    },
                    { 
                        label: 'Humanity/Care', 
                        data: [{x: 40, y: 40, r: 25, category: 'Service', volume: '600'}], 
                        backgroundColor: '#3b82f6', // Brand Blue
                        borderColor: '#fff'
                    },
                    { 
                        label: 'Medical Trust', 
                        data: [{x: 30, y: 15, r: 20, category: 'Expertise', volume: '450'}], 
                        backgroundColor: '#1f2937', // Brand Dark
                        borderColor: '#fff'
                    },
                    { 
                        label: 'Insurance Policy', 
                        data: [{x: 50, y: 25, r: 15, category: 'Risk', volume: '200'}], 
                        backgroundColor: '#ef4444', // Red for Issue
                        borderColor: '#fff'
                    }
                ] 
            },
            options: { 
                responsive: true, 
                maintainAspectRatio: false, 
                scales: { x: { display: false, min: 0, max: 60 }, y: { display: false, min: 0, max: 60 } }, 
                plugins: { 
                    legend: { display: true, position: 'bottom', labels: { boxWidth: 10, font: { size: 10 } } },
                    tooltip: { callbacks: { label: (c) => `${c.raw.category}: ${c.raw.volume} Mentions` } },
                    datalabels: { color: 'white', font: { weight: 'bold', size: 10 }, formatter: (v) => v.category, anchor: 'center', align: 'center' }
                } 
            }
        });

        // 4. WEEKLY MENTIONS CHART (Timeline of Ibrahim Post)
        const ctxWeekly = document.getElementById('weeklyChart').getContext('2d');
        const gradBlue = ctxWeekly.createLinearGradient(0, 0, 0, 300);
        gradBlue.addColorStop(0, 'rgba(59, 130, 246, 0.2)'); 
        gradBlue.addColorStop(1, 'rgba(59, 130, 246, 0)');

        const gradPurple = ctxWeekly.createLinearGradient(0, 0, 0, 300);
        gradPurple.addColorStop(0, 'rgba(139, 92, 246, 0.2)'); 
        gradPurple.addColorStop(1, 'rgba(139, 92, 246, 0)');

        new Chart(ctxWeekly, {
            type: 'line',
            data: {
                labels: ['Dec 06', 'Dec 07', 'Dec 08', 'Dec 09', 'Dec 10', 'Dec 11', 'Dec 12', 'Dec 13'],
                datasets: [
                    {
                        label: 'Owned Media (KHCC Page)',
                        data: [120, 150, 180, 450, 200, 300, 1800, 1600], // Peak on Dec 12 (Ibrahim) + Dec 9 (Insurance)
                        borderColor: '#3b82f6', 
                        backgroundColor: gradBlue,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4, 
                        pointRadius: 4,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#3b82f6',
                        pointBorderWidth: 2
                    },
                    {
                        label: 'Earned Media (News/Influencers)',
                        data: [200, 220, 250, 300, 280, 320, 500, 450], // Steady news coverage
                        borderColor: '#8b5cf6', 
                        backgroundColor: gradPurple,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4, 
                        pointRadius: 4,
                        pointBackgroundColor: '#ffffff',
                        pointBorderColor: '#8b5cf6',
                        pointBorderWidth: 2
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: true, position: 'top', labels: { boxWidth: 10, usePointStyle: true, pointStyle: 'circle' } } },
                scales: { x: { grid: { display: false } }, y: { grid: { borderDash: [4, 4] }, beginAtZero: true } }
            }
        });
    </script>
</body>
</html>
